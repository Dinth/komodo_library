
services:
  bricktracker:
    container_name: bricktracker
    restart: unless-stopped
    image: gitea.baerentsen.space/frederikbaerentsen/bricktracker:latest
    ports:
      - "3333:3333"
    volumes:
      - /opt/docker/bricktracker/bricktracker_data:/data/
      - /opt/docker/bricktracker/bricktracker_instructions:/app/static/instructions/
      - /opt/docker/bricktracker/bricktracker_minifigures:/app/static/minifigures/
      - /opt/docker/bricktracker/bricktracker_parts:/app/static/parts/
      - /opt/docker/bricktracker/bricktracker_sets:/app/static/sets/
    environment:
      BK_DATABASE_PATH: "/data/app.db"
      BK_MINIFIGURES_FOLDER: "minifigures"
      BK_RETIRED_SETS_PATH: "/data/retired_sets.csv"
      BK_THEMES_PATH: "/data/themes.csv"
      BK_REBRICKABLE_API_KEY: "${BK_REBRICKABLE_API_KEY}"
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3333"]
      interval: 10s
      timeout: 5s
      retries: 3